<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Playing with API object</title>

    <script src="../../../javascript/jquery.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.13/angular.min.js"></script>
    <script src="Exp4.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="Exp4.css" />
</head>

<body ng-app="TravelApp">
    <div class="container" id="container">
        <h1>Flight Info API </h1>
        <hr />
    </div>

    <div class="container">
        <h3>Aim of the Experiment</h3>
        The aim of the experiment is to use the flight info API and demonstrate the usefullness of Angular JS MVC architecture. Angular JS is perfect for Single
        Page Applications(SPA's). It is a client side JavaScript framework. Thus in the below example, I would like to show
        the Dynamic content using Angular JS. In the below example you search any nerest airports between two locations. 
        Based on your input, a list of airports will appear.
        <hr />
    </div>

    <div class="container">
        <div class="angular_border">
            <div class="container" ng-controller="Travel-Controller">
                <div class="row">
                    <div class="col-xs-11">
                        <h3 class="text-center">
                            Search Routes
                        </h3>
                        <div class="form-inline text-center">
                            <label>Source City</label>
                            <input class="form-control" ng-model="oCity" />
                            <label>Destination City</label>
                            <input class="form-control" ng-model="dCity" />
                            <button class="btn btn-warning" ng-click="searchAirports()"> Search</button>
                        </div>
                        
                        <table class="table table-stripped">
                            <thead>
                                <tr class="heading_color">
                                    <th>Airport Code</th>
                                    <th>Airport Name</th>
                                    <th>Airport Position</th>
                                    <th>Airport Country</th>
                                </tr>                                
                            </thead>
                            <tbody>
                                <tr ng-repeat="airport in airports">
                                    <td>{{airport.code}}</td>
                                    <td>{{airport.name}}</td>
                                    <td>{{airport.pos}}</td>
                                    <td>{{airport.countryCode}}</td>                                    
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <hr />
    </div>

    <div class="container">
        <h4>Code Snippet</h4>
        I have implemented the above using Angular JS MVC architecture. Here I have a Model, View and a Controller.
        Scope is the scope of the controller. In this example, you can fetch any airport details between two cities.
        Below is the App code.
    </div>

    <!-- ---------------------------- Code Content 1 ----------------------------------------- -->

    <div class="container">
        <pre>
var app = angular.module("TravelApp", []);

app.controller("Travel-Controller",
    function ($scope, $http) {
        var airports = [];
        $scope.searchAirports = function () {
            var oCity = $scope.oCity;
            var dCity = $scope.dCity;
            $http.get("http://free.rome2rio.com/api/1.2/json/Search?key=eU7G6lzt&oName=" + oCity + "&dName=" + dCity)
            .success(function (response) {
                console.log(response);
                $scope.airports = response.airports;
            })
        }
    });
    </pre>
        <hr />
    </div>
    <!-- ---------------------------- View Source Files ----------------------------------------- -->
    <div class="container">
        <h4> Source Code </h4>
        <div><a href="../../../fileview/Default.aspx?~/experiments/week11/Exp4/Exp4.html" target="_blank">View HTML Source</a></div>
        <div><a href="../../../fileview/Default.aspx?~//experiments/week11/Exp4/Exp4.css" target="_blank">View CSS Source</a></div>
        <div><a href="../../../fileview/Default.aspx?~//experiments/week11/Exp4/Exp4.js" target="_blank">View JS Source</a></div>
        <hr />
    </div>

    <!-- ---------------------------- References  ----------------------------------------- -->

    <div class="container">
        <h4>References</h4>
        <div> <a href="http://free.rome2rio.com/documentation" target="_blank">Rome to Rio API</a></div>
        <div> <a href="https://www.youtube.com/watch?v=Kan1sMNOlIc" target="_blank">Prof. Jose (Routing) Youtube Channel</a></div>
    </div>

    <!------------------------------ Footer --------------------------------------->

    <div class="footer_div">
        <footer>
            Northeastern University, CCIS Spring 2015, Copy Right &copy; Abhishek Kumar
        </footer>
    </div>

</body>
</html>
