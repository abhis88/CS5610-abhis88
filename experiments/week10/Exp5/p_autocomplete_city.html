<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

    <title>Autocomplete - World Cities</title>

    <link rel="shortcut icon" href="../../../images/week10/meta_logo.ico" type="image/x-icon" title="favicon">
    <link href="../../../css/bootstrap/css/bootstrap.css" rel="stylesheet" />
    <link href="../../../css/bootstrap/css/bootstrap-theme.css" rel="stylesheet" />
    <link href="../../../css/jquery-ui.css" rel="stylesheet" />
    <link href="p_autocomplete_city.css" rel="stylesheet" />

    <script src="../../../javascript/jquery.js"></script>
    <script src="../../../javascript/bootstrap.min.js"></script>
    <script src="../../../javascript/jquery-ui.js"></script>
    <script src="p_autocomplete_city.js"></script>

</head>
<body>
    <div class="container" id="container">
        <h1>Autocomplete Experiment (JSONP)</h1>
        <hr />
    </div>

    <div class="container">
        <h3>Aim of the Experiment</h3>
        The aim of the experiment was to demonstrate the AJAX functionality. AJAX stands for Asynchronous JavaScript and XML.
        AJAX allows us to render the content asynchronously which allows us not to refresh the entire webpage and refresh
        a particular webpage area. Also it helps webpage to load quickly at the cilent's end. Below is the example where
        you need to type atleast three letters to invoke ajax call and the list of cities will be listed.
        <hr />
    </div>

    <div class="container">
        <div class="row">
            <div class="col-xs-4"></div>
            <div class="col-xs-8 form-inline">
                <label for="source" class="label-padding">City  &nbsp; </label>
                <input id="source" class="form-control" placeholder="Type any city name...">&nbsp;&nbsp;
            </div>
            <div class="col-xs-2"></div>
        </div>
    </div>



    <div class="container height">
        <hr />
        <h4>Code Snippet</h4>
        I have written a js file where on the click of the button, I am calling a function which in turn takes
        input from the input box with id #title. The link returns the response. After receving response we
        call a function called renderMovies which iterates over the response and prints.
    </div>

    <!-- ---------------------------- Code Content 1 ----------------------------------------- -->

    <div class="container">

        <pre>
$(function () {
  $("#getMovies").click(function () {
    var title = $("#title").val();
    $.ajax({
       url: "http://www.myapifilms.com/imdb?title=" + title + "&format=JSONP&aka=0
             &business=0&seasons=0&seasonYear=0&technical=0&filter=N&exactFilter=0
             &limit=10&lang=en-us&actors=N&biography=0&trailer=0&uniqueName=0
             &filmography=0&bornDied=0&starSign=0&actorActress=0&actorTrivia=0
             &movieTrivia=0&awards=0&moviePhotos=N&movieVideos=N",
       dataType: "jsonp",
       success: renderMovies
    });
  });
});
function renderMovies(movies) {
    var parent = $("#movies");
    var template = parent.find(".template");
    parent.empty();
    for (var m in movies) {
        var movie = movies[m];
        var title = movie.title;
        var year = movie.year;
        var plot = movie.plot;
        var idIMDB = movie.idIMDB;
        var entity = template.clone();
        if (plot == "") {
            entity.find(".plot").html("Plot Not Fould");
        } else {
            entity.find(".plot").html(plot);
        }
        entity.find(".movieName").html(title);
        entity.find(".releaseYear").html(year);
        entity.find(".poster").attr("href", "http://www.imdb.com/title/" + idIMDB + "/");
        parent.append(entity);
    }
}
    </pre>
        <hr />
    </div>

    <!-- ---------------------------- View Source Files ----------------------------------------- -->

    <div class="container">
        <h4> Source Code </h4>
        <div><a href="../../../fileview/Default.aspx?~/experiments/week4/html/Exp1.html" target="_blank">View HTML Source</a></div>
        <div><a href="../../../fileview/Default.aspx?~/experiments/week4/css/Exp1.css" target="_blank">View CSS Source</a></div>
        <div><a href="../../../fileview/Default.aspx?~/experiments/week4/js/Exp1.js" target="_blank">View JS Source</a></div>
        <hr />
    </div>

    <!-- ---------------------------- References  ----------------------------------------- -->

    <div class="container">
        <h4>References</h4>
        <div> <a href="http://www.w3schools.com/ajax/" target="_blank">W3 Schools AJAX</a></div>
        <div> <a href="https://www.youtube.com/watch?v=mErJ3HFWZHs" target="_blank">Prof. Jose Youtube Channel</a></div>
    </div>

    <!------------------------------ Footer --------------------------------------->

    <div class="footer_div">
        <footer>
            Northeastern University, CCIS Spring 2015, Copy Right &copy; Abhishek Kumar
        </footer>
    </div>

</body>
</html>
